{"version":3,"file":"main.js","mappings":"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","sources":["webpack://hammeron/./src/index.js"],"sourcesContent":["import \"./styles/index.scss\";\r\n\r\n\r\nwindow.addEventListener(\"load\", () => {\r\n  setTimeout(() => {\r\n    document.querySelector(\".loading\").classList.add('done');\r\n    \r\n  }, 500)\r\n})\r\n\r\n\r\n\r\nconst filter = new Tone.Filter().toDestination()\r\nfilter.set({\r\n  frequency : 1200 ,\r\n  type: 'highpass',\r\n  rolloff : -24\r\n});\r\n\r\nconst osc = new Tone.PolySynth().toDestination()\r\n\r\nosc.connect(filter);\r\n\r\nconst now = Tone.now();\r\n\r\nlet down = {};\r\nlet voices = {};\r\n\r\n// const pitches = ['E2','F2','Gb2','G2','Ab2','A2','Bb2','B2','C3','Db3','D3','Eb3','E3','F3','Gb3','G3','Ab3','A3','Bb3','B3','C4','Db4','D4','Eb4','E4','F4','Gb4'] //octave down\r\n// const pitches = ['C3','D3','E3','F3','G3','Ab3','A3','B3','C4','D4','E4','F4','G4','Ab4','A4','B4','C5','D5','E5','F5','Gb5','G5','Ab5','A5','B5',] //barry haris\r\n// const pitches = ['C2','D2','E2','G2','A2','C3','D3','E3','G3','A3','C4','D4','E4','G4','A4','C5','D5','E5','G5','A5'] // pentatonic\r\n\r\nconst pitches = ['E3','F3','Gb3','G3','Ab3','A3','Bb3','B3',\r\n'C4','Db4','D4','Eb4','E4','F4','Gb4','G4','Ab4','A4','Bb4','B4',\r\n'C5','Db5','D5','Eb5','E5','F5','Gb5','G5','Ab5']\r\n\r\nconst revPitches = pitches.map((x,i) => pitches[pitches.length - i - 1])\r\n\r\nconst keys = \"zxcvbnm,./asdfghjkl;'qwertyuiop[]1234567890-=\".split('')\r\nconst upperKeys = \"ZXCVBNM,./ASDFGHJKL;'QWERTYUIOP[]1234567890-=\".split('')\r\n  keys.forEach(p => {\r\n    down[p] = 0;\r\n  });\r\n  upperKeys.forEach(p => {\r\n    down[p] = 0;\r\n  });\r\n\r\nconst keyMap = {};\r\n\r\nkeys.forEach((key, i) =>{\r\n  if (i < 10) {\r\n    keyMap[key] = pitches[i];\r\n    // keyMap[upperKeys[i]] = pitches[i];\r\n  } else if (i < 21 ) {\r\n    keyMap[key] = pitches[i - 5];\r\n    // keyMap[upperKeys[i]] = pitches[i - 5];\r\n  } else if (i < 33 ) {\r\n    keyMap[key] = pitches[i - 11];\r\n    // keyMap[upperKeys[i]] = pitches[i - 11];\r\n  } else {\r\n    keyMap[key] = pitches[i - 18]\r\n    // keyMap[upperKeys[i]] = pitches[i - 18];\r\n  }\r\n}\r\n);\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n  let freq = document.getElementById('freq');\r\n  let res = document.getElementById('res');\r\n  let filtype = document.getElementById('filter');\r\n  let filtername = document.getElementById('filter-name');\r\n\r\n  freq.addEventListener('input', e => {\r\n    filter.set({ frequency: e.target.value ** 2 / 5 })\r\n  })\r\n\r\n  res.addEventListener('input', e => {\r\n    osc.set({ detune: e.target.value })\r\n  })\r\n\r\n  filtype.addEventListener('input', (e) => {\r\n      if (e.target.value === '1') {\r\n      filter.set({ type: 'lowpass' });\r\n      filtername.innerHTML = 'LPF'\r\n    } else if (e.target.value === '2') {\r\n      filter.set({ type: 'highpass' }) ;\r\n      filtername.innerHTML = 'HPF'\r\n    } else if (e.target.value === '3') { \r\n      filter.set({ type: 'bandpass' });\r\n      filtername.innerHTML = 'BPF'\r\n    } else {\r\n      filter.set({ type: 'allpass' });\r\n      filtername.innerHTML = 'APF'\r\n\r\n    }\r\n  })\r\n\r\n  document.addEventListener(\"keydown\", e => {\r\n\r\n    if ( down[e.key] === 0) {\r\n      down[e.key] = 1;\r\n      voices[keyMap[e.key]] = 1;\r\n      \r\n      osc.triggerAttack(keyMap[e.key], now);\r\n      const pressed = document.getElementsByClassName(`key-${e.key}`)[0]\r\n      if (pressed) pressed.classList.add('pressed')\r\n    } \r\n  });\r\n\r\n  \r\n  document.addEventListener(\"keyup\", (e) => {\r\n    down[e.key] = 0;\r\n    delete voices[keyMap[e.key]]\r\n\r\n    osc.triggerRelease(keyMap[e.key], now)\r\n\r\n    const unpressed = document.getElementsByClassName(`key-${e.key}`)[0]\r\n    if (unpressed) unpressed.classList.remove('pressed')\r\n    }, false)\r\n\r\n    document.addEventListener(\"click\", e => {\r\n      if (['sine','triangle','square','sawtooth'].includes(e.target.classList[0])){\r\n      const old = document.getElementsByClassName('selected')[0]\r\n      if (old) old.classList.remove('selected')\r\n        \r\n    \r\n      e.target.classList.add('selected')\r\n      // synthParams.type = e.target.classList[0]\r\n      \r\n      osc.set({\r\n        'oscillator': {\r\n          'type': e.target.classList[0]\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  const modalcontainer = document.getElementById('modal-container')\r\n  const help = document.getElementById('help')\r\n  help.addEventListener('click', () => {\r\n    modalcontainer.classList.remove('hidden')\r\n  })\r\n  modalcontainer.addEventListener('click', () => {\r\n    modalcontainer.classList.add('hidden')\r\n  })\r\n\r\n\r\n});"],"names":["window","addEventListener","setTimeout","document","querySelector","classList","add","filter","Tone","Filter","toDestination","set","frequency","type","rolloff","osc","PolySynth","connect","now","down","voices","pitches","keys","map","x","i","length","split","upperKeys","forEach","p","keyMap","key","freq","getElementById","res","filtype","filtername","e","Math","pow","target","value","detune","innerHTML","triggerAttack","pressed","getElementsByClassName","concat","triggerRelease","unpressed","remove","includes","old","modalcontainer"],"sourceRoot":""}